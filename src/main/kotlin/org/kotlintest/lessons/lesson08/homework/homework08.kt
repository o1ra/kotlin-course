package org.example.org.kotlintest.lessons.lesson08.homework

fun main() {

    replaseString("Это невозможно выполнить за один день")
    replaseString("Я не уверен в успехе этого проекта")
    replaseString("Произошла катастрофа на сервере")
    replaseString("Этот код работает без проблем")
    replaseString("Удача")

    val phrase = "Котлин лучший язык программирования"
    println(createAbbreviation(phrase))

    exercise3("1234 5623 4567 1234")

    println(extractFileName( "C:/Пользователи/Документы/report.txt"))
}

//1. Преобразование строк.
//Создайте функцию, которая будет анализировать входящие фразы и применять к ним
// различные преобразования, делая текст более ироничным или забавным. Функция
// должна уметь распознавать ключевые слова или условия и соответственно изменять фразу.
//Правила проверки и преобразования:

fun replaseString(arg: String) {
    val phrase = when {
        //Если фраза содержит слово "невозможно":
        //Преобразование: Замените "невозможно" на "совершенно точно возможно, просто требует времени".
        arg.contains("невозможно") -> arg.replace(
            "невозможно",
            "совершенно точно возможно, просто требует времени"
        )

        //Если фраза начинается с "Я не уверен":
        //Преобразование: Добавьте в конец фразы ", но моя интуиция говорит об обратном".
        arg.startsWith("Я не уверен") -> arg.plus(" совершенно точно возможно, просто требует времени")

        //Если фраза содержит слово "катастрофа":
        //Преобразование: Замените "катастрофа" на "интересное событие".
        arg.contains("катастрофа") -> arg.replace(
            "катастрофа",
            "интересное событие"
        )

        //Если фраза заканчивается на "без проблем":
        //Преобразование: Замените "без проблем" на "с парой интересных вызовов на пути".
        arg.endsWith("без проблем") -> arg.replace(
            "без проблем",
            "с парой интересных вызовов на пути"
        )


        //Если фраза содержит только одно слово:
        //Преобразование: Добавьте перед словом "Иногда," и после слова ", но не всегда".
        !arg.contains(" ") -> "Иногда, $arg, но не всегда"


        else -> arg

    }

    println(phrase)


}

//2. Извлечение даты из строки лога
//У вас есть строка лога, например "Пользователь вошел в систему -> 2021-12-01 09:48:23"
// (данные могут быть любыми, но формат всегда такой). Извлеките отдельно дату и время из
// этой строки и сразу распечатай их по очереди. Используй indexOf или split для получения
// правой части сообщения.
fun extractDateTime(log: String) {
    val parts = log.split(" ").reversed()
    val date = parts[0]
    val time = parts[1]
    println("Дата: $date")
    println("Время: $time")

}

//3. Маскирование личных данных
//Дана строка с номером кредитной карты, например "4539 1488 0343 6467". Замаскируйте все
// цифры, кроме последних четырех, символами "*".
fun exercise3(arg: String) {
    val parts = arg.split(" ")
    println(
        arg
            .replaceRange(0..3, "****")
            .replaceRange(5..8, "****")
            .replaceRange(10..13, "****")

    )

}

//4. Форматирование адреса электронной почты.
//У вас есть электронный адрес, например "username@example.com".
// Преобразуйте его в строку "username [at] example [dot] com", используя функцию replace()
fun formatEmail(email: String): String {
    return email
        .replace(".", "[dot]")
        .replace("@", "[at]")
}

//5. Извлечение имени файла из пути.
//Дан путь к файлу, например "C:/Пользователи/Документы/report.txt" или
// "D:/good.themes/dracula.theme" (может быть любым). Извлеките название файла с расширением.
fun extractFileName(path: String): String {
    val parts = path.split("/") // Разбиваем по слешам (прямому и обратному)
    return parts.last() // Последний элемент — имя файла с расширением
}

//6. Создание аббревиатуры из фразы.
//У вас есть фраза, например "Котлин лучший язык программирования" (может быть любой
// с разделителями слов - пробел). Создайте аббревиатуру из начальных букв слов (например, "ООП").
//Используйте split. Используйте for для перебора слов. Используйте var
// переменную для накопления первых букв.
fun createAbbreviation(phrase: String): String {
    val words = phrase.split(" ") // Разбиваем фразу на слова
    var abbreviation = ""

    for (word in words) {
        if (word.isNotEmpty()) {
            abbreviation += word[0].uppercaseChar() // Берём первый символ слова и делаем заглавным
        }
    }
    return abbreviation
}